/* TenSafe Finance Demonstrator â€” mobile-first dark theme */

:root {
  --bg: #0a0a0f;
  --surface: #14141f;
  --surface2: #1e1e2e;
  --border: #2a2a3a;
  --text: #e0e0e8;
  --text-dim: #888898;
  --accent: #4fc3f7;
  --accent2: #81c784;
  --warn: #ffb74d;
  --error: #ef5350;
  --green: #66bb6a;
  --font: -apple-system, BlinkMacSystemFont, "SF Pro", "Segoe UI", sans-serif;
  --mono: "SF Mono", "Menlo", "Monaco", monospace;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html, body {
  height: 100%; width: 100%;
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  -webkit-text-size-adjust: 100%;
  overflow: hidden;
}

/* ---- Header ---- */
#header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 16px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 10;
}
#header h1 { font-size: 18px; font-weight: 700; color: var(--accent); }
.badge {
  display: inline-block; padding: 2px 8px; border-radius: 10px;
  font-size: 11px; font-weight: 600;
  background: var(--surface2); color: var(--text-dim);
  margin-left: 8px;
}
.badge.online { background: #1b3a1b; color: var(--green); }
.badge.he { background: #1a2a3a; color: var(--accent); }
.badge.split { background: #2a1a3a; color: #ce93d8; }
.header-right button {
  background: var(--surface2); border: 1px solid var(--border);
  color: var(--text); padding: 6px 12px; border-radius: 6px;
  font-size: 12px; cursor: pointer; margin-left: 6px;
}
.header-right button:active { background: var(--border); }

/* ---- Metrics bar ---- */
#metrics-bar {
  display: flex; justify-content: space-around;
  padding: 8px 12px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  cursor: pointer;
}
.metric { text-align: center; }
.metric-val {
  display: block; font-size: 18px; font-weight: 700;
  font-family: var(--mono); color: var(--accent);
}
.metric-lbl { font-size: 10px; color: var(--text-dim); text-transform: uppercase; }

/* ---- HE breakdown ---- */
#he-breakdown {
  background: var(--surface2); padding: 0 16px;
  max-height: 0; overflow: hidden;
  transition: max-height 0.3s, padding 0.3s;
  border-bottom: 1px solid var(--border);
}
#he-breakdown.expanded { max-height: 200px; padding: 10px 16px; }
.he-row {
  display: flex; justify-content: space-between;
  padding: 3px 0; font-size: 12px;
}
.he-row span:last-child { font-family: var(--mono); color: var(--accent); }

/* ---- Encryption Pipeline ---- */
#pipeline-bar {
  display: flex; align-items: center; justify-content: center;
  gap: 2px; padding: 8px 10px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.pipe-stage {
  display: flex; flex-direction: column; align-items: center;
  padding: 4px 8px; border-radius: 8px;
  background: var(--surface2); border: 1px solid var(--border);
  min-width: 52px; transition: background 0.3s, border-color 0.3s, color 0.3s;
}
.pipe-stage.active {
  background: #1a2a3a; border-color: var(--accent);
}
.pipe-stage.done {
  background: #1b3a1b; border-color: var(--green);
}
.pipe-stage .pipe-icon { font-size: 14px; line-height: 1; }
.pipe-stage .pipe-label {
  font-size: 9px; text-transform: uppercase; color: var(--text-dim);
  margin-top: 2px; white-space: nowrap;
}
.pipe-stage.active .pipe-label { color: var(--accent); }
.pipe-stage.done .pipe-label { color: var(--green); }
.pipe-stage .pipe-time {
  font-size: 10px; font-family: var(--mono); color: var(--accent);
  margin-top: 1px; min-height: 14px;
}
.pipe-stage.done .pipe-time { color: var(--green); }
.pipe-arrow {
  color: var(--text-dim); font-size: 12px; flex-shrink: 0;
  transition: color 0.3s;
}
.pipe-arrow.lit { color: var(--accent); }

/* ---- Expert Routing ---- */
#routing-bar {
  display: flex; align-items: center; justify-content: center;
  gap: 8px; padding: 6px 12px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
}
.route-pill {
  display: flex; align-items: center; gap: 4px;
  padding: 3px 10px; border-radius: 12px;
  background: var(--surface2); border: 1px solid var(--border);
  font-size: 11px; color: var(--text-dim);
  transition: background 0.3s, border-color 0.3s, color 0.3s;
}
.route-pill.active {
  background: #1a2a3a; border-color: var(--accent); color: var(--accent);
}
.route-pill.always-on {
  background: #1a2520; border-color: var(--warn); color: var(--warn);
}
.route-dot { font-size: 10px; }
.route-pill.active .route-dot { color: var(--accent); }
.route-name { font-weight: 600; }
.route-count {
  font-family: var(--mono); font-size: 10px; color: var(--text-dim);
  margin-left: 2px;
}

/* ---- Chat ---- */
#chat-area {
  flex: 1; overflow-y: auto; padding: 12px 16px;
  height: calc(100vh - 310px);
  -webkit-overflow-scrolling: touch;
}
.msg {
  margin-bottom: 12px; padding: 10px 14px;
  border-radius: 12px; max-width: 90%;
  line-height: 1.5; word-wrap: break-word;
}
.msg.user {
  background: #1a2a44; margin-left: auto;
  border-bottom-right-radius: 4px;
}
.msg.assistant {
  background: var(--surface2);
  border-bottom-left-radius: 4px;
}
.msg .enc-badge {
  display: inline-block; margin-top: 6px; padding: 3px 8px;
  border-radius: 6px; font-size: 11px; font-family: var(--mono);
}
.enc-badge.encrypted { background: #1a2a3a; color: var(--accent); }
.enc-badge.decrypted { background: #1b3a1b; color: var(--green); }
.enc-badge .expert-tag {
  margin-left: 6px; color: var(--warn); font-weight: 600;
}

/* ---- Compare panel ---- */
#compare-panel {
  display: flex; gap: 8px; padding: 12px;
  background: var(--surface);
  border-top: 1px solid var(--border);
  max-height: 40vh; overflow-y: auto;
}
#compare-panel.hidden { display: none; }
.compare-col {
  flex: 1; background: var(--surface2); border-radius: 8px;
  padding: 10px; font-size: 13px;
}
.compare-col h3 { font-size: 12px; color: var(--text-dim); margin-bottom: 8px; }
.cmp-text { line-height: 1.5; min-height: 60px; }
.cmp-stats { margin-top: 8px; font-size: 11px; color: var(--text-dim); font-family: var(--mono); }

/* ---- Input ---- */
#input-bar {
  display: flex; padding: 10px 12px;
  background: var(--surface);
  border-top: 1px solid var(--border);
  position: sticky; bottom: 0;
}
#input-msg {
  flex: 1; background: var(--surface2); border: 1px solid var(--border);
  color: var(--text); padding: 10px 14px; border-radius: 8px;
  font-size: 15px; outline: none;
}
#input-msg::placeholder { color: var(--text-dim); }
#btn-send {
  margin-left: 8px; background: var(--accent); color: #000;
  border: none; padding: 10px 18px; border-radius: 8px;
  font-weight: 700; font-size: 14px; cursor: pointer;
}
#btn-send:active { opacity: 0.8; }

/* ---- Settings drawer ---- */
#settings-drawer {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.7);
  z-index: 100; display: flex; align-items: flex-end;
}
#settings-drawer.hidden { display: none; }
.settings-content {
  width: 100%; background: var(--surface);
  border-radius: 16px 16px 0 0;
  padding: 20px 20px 32px;
  max-height: 80vh; overflow-y: auto;
}
.settings-content h2 { margin-bottom: 16px; font-size: 18px; }
.settings-content label {
  display: block; margin-bottom: 12px;
  font-size: 13px; color: var(--text-dim);
}
.settings-content input[type="range"] {
  width: 100%; margin-top: 4px;
  accent-color: var(--accent);
}
.toggle-label {
  display: flex !important; align-items: center; gap: 8px;
}
.info-row {
  display: flex; justify-content: space-between;
  padding: 6px 0; font-size: 12px; color: var(--text-dim);
}
.info-row span:last-child { color: var(--text); font-family: var(--mono); }
#btn-close-settings {
  margin-top: 16px; width: 100%; padding: 12px;
  background: var(--surface2); border: 1px solid var(--border);
  color: var(--text); border-radius: 8px; font-size: 14px; cursor: pointer;
}

/* ---- Split inference status bar ---- */
#split-status {
  display: flex; align-items: center; gap: 8px;
  padding: 6px 16px;
  background: #1a1024;
  border-bottom: 1px solid #3a2a4a;
  font-size: 12px; color: #ce93d8;
}
#split-status.hidden { display: none; }
#split-stage {
  font-weight: 700; text-transform: uppercase;
  min-width: 60px;
}
#split-progress-wrap {
  flex: 1; height: 4px;
  background: var(--surface2); border-radius: 2px;
  overflow: hidden;
}
#split-progress-bar {
  height: 100%; width: 0%;
  background: #ce93d8; border-radius: 2px;
  transition: width 0.3s;
}
#split-detail {
  font-family: var(--mono); font-size: 11px;
  color: #b39ddb; max-width: 50%; white-space: nowrap;
  overflow: hidden; text-overflow: ellipsis;
}

/* ---- Scrollbar ---- */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
